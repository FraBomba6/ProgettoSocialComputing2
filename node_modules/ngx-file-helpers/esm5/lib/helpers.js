import { __awaiter, __generator } from "tslib";
import { ReadFileImpl } from './read-file-impl';
import { ReadMode } from './read-mode.enum';
export function coerceBooleanProperty(value) {
    return value != null && "" + value !== 'false';
}
export function readFileAsync(file, readMode) {
    return __awaiter(this, void 0, void 0, function () {
        return __generator(this, function (_a) {
            return [2 /*return*/, new Promise(function (resolve, reject) {
                    var reader = new FileReader();
                    reader.onload = function (event) {
                        var fileReader = event.target;
                        var readFile = new ReadFileImpl(file, readMode, fileReader.result);
                        resolve(readFile);
                    };
                    reader.onerror = function (event) {
                        reject(event);
                    };
                    switch (readMode) {
                        case ReadMode.arrayBuffer:
                            reader.readAsArrayBuffer(file);
                            break;
                        case ReadMode.binaryString:
                            reader.readAsBinaryString(file);
                            break;
                        case ReadMode.text:
                            reader.readAsText(file);
                            break;
                        case ReadMode.dataURL:
                        default:
                            reader.readAsDataURL(file);
                            break;
                    }
                })];
        });
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGVscGVycy5qcyIsInNvdXJjZVJvb3QiOiJuZzovL25neC1maWxlLWhlbHBlcnMvIiwic291cmNlcyI6WyJsaWIvaGVscGVycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQ0EsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQ2hELE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUU1QyxNQUFNLFVBQVUscUJBQXFCLENBQUMsS0FBVTtJQUM5QyxPQUFPLEtBQUssSUFBSSxJQUFJLElBQUksS0FBRyxLQUFPLEtBQUssT0FBTyxDQUFDO0FBQ2pELENBQUM7QUFFRCxNQUFNLFVBQWdCLGFBQWEsQ0FDakMsSUFBVSxFQUNWLFFBQWtCOzs7WUFFbEIsc0JBQU8sSUFBSSxPQUFPLENBQUMsVUFBQyxPQUFPLEVBQUUsTUFBTTtvQkFDakMsSUFBTSxNQUFNLEdBQUcsSUFBSSxVQUFVLEVBQUUsQ0FBQztvQkFFaEMsTUFBTSxDQUFDLE1BQU0sR0FBRyxVQUFDLEtBQW9CO3dCQUNuQyxJQUFNLFVBQVUsR0FBRyxLQUFLLENBQUMsTUFBb0IsQ0FBQzt3QkFDOUMsSUFBTSxRQUFRLEdBQUcsSUFBSSxZQUFZLENBQUMsSUFBSSxFQUFFLFFBQVEsRUFBRSxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUM7d0JBRXJFLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztvQkFDcEIsQ0FBQyxDQUFDO29CQUVGLE1BQU0sQ0FBQyxPQUFPLEdBQUcsVUFBQyxLQUFvQjt3QkFDcEMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO29CQUNoQixDQUFDLENBQUM7b0JBRUYsUUFBUSxRQUFRLEVBQUU7d0JBQ2hCLEtBQUssUUFBUSxDQUFDLFdBQVc7NEJBQ3ZCLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQzs0QkFDL0IsTUFBTTt3QkFDUixLQUFLLFFBQVEsQ0FBQyxZQUFZOzRCQUN4QixNQUFNLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFDLENBQUM7NEJBQ2hDLE1BQU07d0JBQ1IsS0FBSyxRQUFRLENBQUMsSUFBSTs0QkFDaEIsTUFBTSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQzs0QkFDeEIsTUFBTTt3QkFDUixLQUFLLFFBQVEsQ0FBQyxPQUFPLENBQUM7d0JBQ3RCOzRCQUNFLE1BQU0sQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUM7NEJBQzNCLE1BQU07cUJBQ1Q7Z0JBQ0gsQ0FBQyxDQUFDLEVBQUM7OztDQUNKIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUmVhZEZpbGUgfSBmcm9tICcuL3JlYWQtZmlsZSc7XHJcbmltcG9ydCB7IFJlYWRGaWxlSW1wbCB9IGZyb20gJy4vcmVhZC1maWxlLWltcGwnO1xyXG5pbXBvcnQgeyBSZWFkTW9kZSB9IGZyb20gJy4vcmVhZC1tb2RlLmVudW0nO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNvZXJjZUJvb2xlYW5Qcm9wZXJ0eSh2YWx1ZTogYW55KTogYm9vbGVhbiB7XHJcbiAgcmV0dXJuIHZhbHVlICE9IG51bGwgJiYgYCR7dmFsdWV9YCAhPT0gJ2ZhbHNlJztcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlYWRGaWxlQXN5bmMoXHJcbiAgZmlsZTogRmlsZSxcclxuICByZWFkTW9kZTogUmVhZE1vZGVcclxuKTogUHJvbWlzZTxSZWFkRmlsZT4ge1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG5cclxuICAgIHJlYWRlci5vbmxvYWQgPSAoZXZlbnQ6IFByb2dyZXNzRXZlbnQpID0+IHtcclxuICAgICAgY29uc3QgZmlsZVJlYWRlciA9IGV2ZW50LnRhcmdldCBhcyBGaWxlUmVhZGVyO1xyXG4gICAgICBjb25zdCByZWFkRmlsZSA9IG5ldyBSZWFkRmlsZUltcGwoZmlsZSwgcmVhZE1vZGUsIGZpbGVSZWFkZXIucmVzdWx0KTtcclxuXHJcbiAgICAgIHJlc29sdmUocmVhZEZpbGUpO1xyXG4gICAgfTtcclxuXHJcbiAgICByZWFkZXIub25lcnJvciA9IChldmVudDogUHJvZ3Jlc3NFdmVudCkgPT4ge1xyXG4gICAgICByZWplY3QoZXZlbnQpO1xyXG4gICAgfTtcclxuXHJcbiAgICBzd2l0Y2ggKHJlYWRNb2RlKSB7XHJcbiAgICAgIGNhc2UgUmVhZE1vZGUuYXJyYXlCdWZmZXI6XHJcbiAgICAgICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGZpbGUpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFJlYWRNb2RlLmJpbmFyeVN0cmluZzpcclxuICAgICAgICByZWFkZXIucmVhZEFzQmluYXJ5U3RyaW5nKGZpbGUpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFJlYWRNb2RlLnRleHQ6XHJcbiAgICAgICAgcmVhZGVyLnJlYWRBc1RleHQoZmlsZSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgUmVhZE1vZGUuZGF0YVVSTDpcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICB9KTtcclxufVxyXG4iXX0=