!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core")):"function"==typeof define&&define.amd?define("ngx-file-helpers",["exports","@angular/core"],t):t((e=e||self)["ngx-file-helpers"]={},e.ng.core)}(this,(function(e,t){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function r(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function i(e,t,n,r){var i,o=arguments.length,u=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(u=(o<3?i(u):o>3?i(t,n,u):i(t,n))||u);return o>3&&u&&Object.defineProperty(t,n,u),u}function o(e,t,n,r){return new(n||(n=Promise))((function(i,o){function u(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,a)}l((r=r.apply(e,t||[])).next())}))}function u(e,t){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,r=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!(i=u.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1],i=o;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(o);break}i[2]&&u.ops.pop(),u.trys.pop();continue}o=t.call(e,u)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var a,l=function(){function e(e,t,n){this._underlyingFile=e,this._readMode=t,this._content=n}return Object.defineProperty(e.prototype,"name",{get:function(){return this._underlyingFile.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._underlyingFile.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._underlyingFile.type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readMode",{get:function(){return this._readMode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"content",{get:function(){return this._content},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"underlyingFile",{get:function(){return this._underlyingFile},enumerable:!0,configurable:!0}),e}();function c(t,n){return o(this,void 0,void 0,(function(){return u(this,(function(r){return[2,new Promise((function(r,i){var o=new FileReader;switch(o.onload=function(e){var i=e.target,o=new l(t,n,i.result);r(o)},o.onerror=function(e){i(e)},n){case e.ReadMode.arrayBuffer:o.readAsArrayBuffer(t);break;case e.ReadMode.binaryString:o.readAsBinaryString(t);break;case e.ReadMode.text:o.readAsText(t);break;case e.ReadMode.dataURL:default:o.readAsDataURL(t)}}))]}))}))}(a=e.ReadMode||(e.ReadMode={}))[a.arrayBuffer=0]="arrayBuffer",a[a.binaryString=1]="binaryString",a[a.dataURL=2]="dataURL",a[a.text=3]="text";var p=function(){function e(){this.filter=function(){return!0},this.readStart=new t.EventEmitter,this.readEnd=new t.EventEmitter}return e.prototype.readFiles=function(e,t){return o(this,void 0,void 0,(function(){var n,r,i=this;return u(this,(function(a){switch(a.label){case 0:return n=Array.from(e).filter(this.filter),r=n.length,this.readStart.emit(r),[4,Promise.all(n.map((function(e){return o(i,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:return[4,c(e,this.readMode)];case 1:return n=r.sent(),t(n),[2]}}))}))})))];case 1:return a.sent(),this.readEnd.emit(r),[2]}}))}))},i([t.Input()],e.prototype,"readMode",void 0),i([t.Input()],e.prototype,"filter",void 0),i([t.Output()],e.prototype,"readStart",void 0),i([t.Output()],e.prototype,"readEnd",void 0),e}(),s=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.fileDrop=new t.EventEmitter,n}return r(n,e),n.prototype.onDragEnter=function(e){e.stopPropagation(),e.preventDefault()},n.prototype.onDragOver=function(e){e.stopPropagation(),e.preventDefault()},n.prototype.onDrop=function(e){var t=this;e.stopPropagation(),e.preventDefault(),this.readFiles(e.dataTransfer.files,(function(e){return t.fileDrop.emit(e)}))},i([t.Output()],n.prototype,"fileDrop",void 0),i([t.HostListener("dragenter",["$event"])],n.prototype,"onDragEnter",null),i([t.HostListener("dragover",["$event"])],n.prototype,"onDragOver",null),i([t.HostListener("drop",["$event"])],n.prototype,"onDrop",null),n=i([t.Directive({selector:"[ngxFileDropzone]",exportAs:"ngxFileDropzone"})],n)}(p),f=function(e){function n(n,r){var i=e.call(this)||this;return i.el=n,i.renderer=r,i.accept="",i.filePick=new t.EventEmitter,i}return r(n,e),Object.defineProperty(n.prototype,"multiple",{get:function(){return this._multiple},set:function(e){this._multiple=function(e){return null!=e&&""+e!="false"}(e)},enumerable:!0,configurable:!0}),n.prototype.ngOnInit=function(){var e=this;this._input=this.renderer.createElement("input"),this.renderer.appendChild(this.el.nativeElement,this._input),this.renderer.setAttribute(this._input,"type","file"),this.renderer.setAttribute(this._input,"accept",this.accept),this.renderer.setStyle(this._input,"display","none"),this.multiple&&this.renderer.setAttribute(this._input,"multiple","multiple"),this.renderer.listen(this._input,"change",(function(t){return e._onListen(t)}))},n.prototype.reset=function(){this._input?this._input.value=null:console.error("It seems that ngOnInit() has not been executed or that the hidden _input element is null. Did you mess with the DOM?")},n.prototype.browse=function(){this._input?this._input.click():console.error("It seems that ngOnInit() has not been executed or that the hidden _input element is null. Did you mess with the DOM?")},n.prototype._onListen=function(e){var t=this,n=e.target;this.readFiles(n.files,(function(e){return t.filePick.emit(e)})).finally((function(){return n.value=""}))},n.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2}]},i([t.Input()],n.prototype,"accept",void 0),i([t.Input()],n.prototype,"multiple",null),i([t.Output()],n.prototype,"filePick",void 0),i([t.HostListener("click")],n.prototype,"browse",null),n=i([t.Directive({selector:"[ngxFilePicker]",exportAs:"ngxFilePicker"})],n)}(p),d=function(){function e(){}return e=i([t.NgModule({declarations:[s,f],imports:[],exports:[s,f]})],e)}();e.FileDropzoneDirective=s,e.FilePickerDirective=f,e.NgxFileHelpersModule=d,e.Éµa=p,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-file-helpers.umd.min.js.map